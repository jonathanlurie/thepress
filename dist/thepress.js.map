{"version":3,"file":"thepress.js","sources":["../src/EventManager.js","../src/Tools.js","../src/Config.js","../src/ArticleCollection.js","../src/ThePress.js","../src/index.js"],"sourcesContent":["/**\n * The EventManager deals with events, create them, call them.\n * This class is mostly for being inherited from.\n */\nclass EventManager {\n  /**\n   * Constructor\n   */\n  constructor() {\n    this._events = {}\n  }\n\n\n  /**\n   * Define an event, with a name associated with a function\n   * @param  {String} eventName - Name to give to the event\n   * @param  {Function} callback - function associated to the even\n   */\n  on(eventName, callback) {\n    if (typeof callback === 'function') {\n      if (!(eventName in this._events)) {\n        this._events[eventName] = []\n      }\n      this._events[eventName].push(callback)\n    } else {\n      console.warn('The callback must be of type Function')\n    }\n  }\n\n\n  emit(eventName, args = []) {\n    // the event must exist and be non null\n    if ((eventName in this._events) && (this._events[eventName].length > 0)) {\n      const events = this._events[eventName]\n      for (let i = 0; i < events.length; i += 1) {\n        events[i](...args)\n      }\n    } else {\n      console.warn(`No function associated to the event ${eventName}`)\n    }\n  }\n}\n\nexport default EventManager\n","/**\n * Fetch some distant json files by URL. The callback is called with Ã© args:\n * - the list of urls (as provided)\n * - the list of js object corresponding to the json files\n * If some json file could not be fetched, their value are null\n * @param  {[type]} urls [description]\n */\nfunction fetchJson (urls, cb) {\n\n  if (typeof cb !== 'function') {\n    throw 'The callback provided must be a function'\n  }\n\n  // if a single url is provided, we make it an array\n  if (typeof urls === 'string') {\n    urls = [urls]\n  }\n\n  // separate function to make code more clear\n  const grabContent = url => fetch(url)\n    .then(res => res.json())\n    .catch(function(error) {\n      return null\n    })\n\n  Promise\n  .all(urls.map(grabContent))\n  .then(function(res){\n    if (urls.length === 1) {\n      cb(urls[0], res[0])\n    } else {\n      cb(urls, res)\n    }\n  })\n}\n\n\n\nexport { fetchJson }\n","\n\nlet mainConfig = null\n\nfunction setMainConfig (data) {\n  mainConfig = data\n}\n\nfunction getMainConfig () {\n  return mainConfig\n}\n\nexport {\n  setMainConfig,\n  getMainConfig\n}\n","import { getMainConfig } from './Config'\nimport { fetchJson } from './Tools'\n\nclass ArticleCollection {\n  constructor() {\n    this._mainConfig = getMainConfig()\n\n    let pathToArticleList = this._mainConfig.content.articleDir + 'list.json'\n\n    fetchJson(pathToArticleList, function(url, data){\n      if (!data)\n        throw 'The list of articles is not available'\n\n      console.log(data)\n      \n    })\n\n\n  }\n}\n\nexport default ArticleCollection\n","import EventManager from './EventManager'\nimport { fetchJson } from './Tools'\nimport { setMainConfig } from './Config'\nimport ArticleCollection from './ArticleCollection'\n\n\nclass ThePress extends EventManager{\n\n  constructor () {\n    super()\n    let that = this\n    this._articleCollection = null\n\n\n    fetchJson('./config.json', function(url, data){\n      if (!data)\n        throw 'The config file is not available'\n\n      setMainConfig(data)\n      that._init()\n    })\n\n  }\n\n  _init () {\n    this._articleCollection = new ArticleCollection()\n  }\n\n}\n\n\nexport default ThePress\n","import ThePress from './ThePress'\n\nexport default ({ThePress})\n"],"names":[],"mappings":"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"}