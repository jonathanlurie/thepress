{"version":3,"file":"thepress.js","sources":["../src/EventManager.js","../src/Tools.js","../src/Config.js","../src/Article.js","../src/ArticleCollection.js","../src/ThePress.js","../src/index.js"],"sourcesContent":["/**\n * The EventManager deals with events, create them, call them.\n * This class is mostly for being inherited from.\n */\nclass EventManager {\n  /**\n   * Constructor\n   */\n  constructor() {\n    this._events = {}\n  }\n\n\n  /**\n   * Define an event, with a name associated with a function\n   * @param  {String} eventName - Name to give to the event\n   * @param  {Function} callback - function associated to the even\n   */\n  on(eventName, callback) {\n    if (typeof callback === 'function') {\n      if (!(eventName in this._events)) {\n        this._events[eventName] = []\n      }\n      this._events[eventName].push(callback)\n    } else {\n      console.warn('The callback must be of type Function')\n    }\n  }\n\n\n  emit(eventName, args = []) {\n    // the event must exist and be non null\n    if ((eventName in this._events) && (this._events[eventName].length > 0)) {\n      const events = this._events[eventName]\n      for (let i = 0; i < events.length; i += 1) {\n        events[i](...args)\n      }\n    } else {\n      console.warn(`No function associated to the event ${eventName}`)\n    }\n  }\n}\n\nexport default EventManager\n","/**\n * Fetch some distant json files by URL. The callback is called with Ã© args:\n * - the list of urls (as provided)\n * - the list of js object corresponding to the json files\n * If some json file could not be fetched, their value are null\n * @param  {[type]} urls [description]\n */\nfunction fetchJson (urls, cb) {\n\n  if (typeof cb !== 'function') {\n    throw 'The callback provided must be a function'\n  }\n\n  // if a single url is provided, we make it an array\n  if (typeof urls === 'string') {\n    urls = [urls]\n  }\n\n  // separate function to make code more clear\n  const grabContent = url => fetch(url)\n    .then(res => res.json())\n    .catch(function(error) {\n      return null\n    })\n\n  Promise\n  .all(urls.map(grabContent))\n  .then(function(res){\n    if (urls.length === 1) {\n      cb(urls[0], res[0])\n    } else {\n      cb(urls, res)\n    }\n  })\n}\n\n\n\nfunction fetchText(urls, cb) {\n\n  if (typeof cb !== 'function') {\n    throw 'The callback provided must be a function'\n  }\n\n  // if a single url is provided, we make it an array\n  if (typeof urls === 'string') {\n    urls = [urls]\n  }\n\n  // separate function to make code more clear\n  const grabContent = url => fetch(url)\n    .then(res => res.text())\n    .catch(function(error) {\n      return null\n    })\n\n  Promise\n  .all(urls.map(grabContent))\n  .then(function(res){\n    if (urls.length === 1) {\n      cb(urls[0], res[0])\n    } else {\n      cb(urls, res)\n    }\n  })\n}\n\n\nfunction pathJoin_ORIG(parts, separator = '/'){\n   let replace   = new RegExp(separator+'{1,}', 'g');\n   return parts.join(separator).replace(replace, separator);\n}\n\n\nfunction pathJoin (parts, separator = '/') {\n  let cleanParts = []\n\n  for (let i=0; i<parts.length; i++) {\n    let part = parts[i]\n    if (i > 0) {\n      if (part[0] === separator) {\n        part = part.substring(1)\n      }\n    }\n\n    if (part[part.length - 1] === separator) {\n      part = part.substring(0, part.length - 1)\n    }\n\n    cleanParts.push(part)\n  }\n\n  return cleanParts.join(separator)\n}\n\n\n/**\n * Get the URL without the #hash\n * @return {String} the curent URL\n */\nfunction getURL () {\n  return location.protocol+'//'+location.host+location.pathname\n}\n\n\nfunction getAbsoluteURL (path) {\n  if (path.startsWith('http')) {\n    return path\n  } else {\n    return pathJoin([getURL(), path])\n  }\n}\n\n\n\nexport { fetchJson, fetchText, pathJoin, getURL, getAbsoluteURL }\n","\n\nlet mainConfig = null\n\nfunction setMainConfig (data) {\n  mainConfig = data\n}\n\nfunction getMainConfig () {\n  return mainConfig\n}\n\nexport {\n  setMainConfig,\n  getMainConfig\n}\n","import EventManager from './EventManager'\nimport { fetchText, pathJoin, getAbsoluteURL } from './Tools'\nimport { getMainConfig } from './Config'\n\nclass Article extends EventManager {\n\n  constructor (id) {\n    super()\n    this._mainConfig = getMainConfig()\n    this._folderURL = getAbsoluteURL(pathJoin([this._mainConfig.content.articleDir, id ]))\n    this._markdownURL = pathJoin([this._folderURL, \"index.md\"])\n    this._configURL = pathJoin([this._folderURL, \"config.json\"])\n\n    this._id = id\n    this._configLoaded = false\n    this._title = null\n    this._author = null\n    this._date = null\n    this._tags = []\n    this._excerpt = null\n    this._cover = null\n    this._published = false\n    this._markdownContent = null\n    this._htmlContent = null\n  }\n\n  confirmConfigLoaded () {\n    this._configLoaded = true\n  }\n\n  isConfigLoaded () {\n    return this._configLoaded\n  }\n\n\n  getMarkdownURL () {\n    return this._markdownURL\n  }\n\n\n  getConfigURL () {\n    return this._configURL\n  }\n\n  setTitle (t) {\n    this._title = t\n  }\n\n  setAuthor (a) {\n    this._author = a\n  }\n\n\n  setDate (d) {\n    this._date = d\n  }\n\n\n  setTags (tags) {\n    this._tags = tags\n  }\n\n\n  setExcerpt (e) {\n    this._excerpt = e\n  }\n\n\n  // TODO resolve for relative path\n  setCover (c) {\n    if (c.startsWith('http')) {\n      this._cover = c\n    } else {\n      this._cover = pathJoin([this._folderURL, c])\n    }\n\n    console.log(this._cover);\n\n  }\n\n\n  setPublished (p) {\n    this._published = p\n  }\n\n\n  setMarkdownContent (md) {\n    this._markdownContent = md\n  }\n\n  getTitle () {\n    return this._title\n  }\n\n  getAuthor () {\n    return this._author\n  }\n\n\n  getDate () {\n    return this._date\n  }\n\n\n  getTags () {\n    return this._tags\n  }\n\n\n  getExcerpt () {\n    return this._excerpt\n  }\n\n\n  getCover () {\n    return this._cover\n  }\n\n\n  getPublished () {\n    return this._published\n  }\n\n\n  getMarkdownContent () {\n    return this._markdownContent\n  }\n\n\n  _convertMardownToHTML () {\n    // TODO\n  }\n\n\n  loadContent (cb) {\n    console.log(this)\n\n    if (this._htmlContent && typeof cb === 'function') {\n      return cb(this)\n    }\n\n    fetchText( this._markdownURL, function(url, data) {\n      if (!data)\n        throw 'The article at ' + url + 'could not be loaded'\n\n      console.log(data)\n\n      // TODO convert md to html\n\n      if (typeof cb === 'function') {\n        return cb(this)\n      }\n    })\n  }\n\n}\n\n\nexport default Article\n","import EventManager from './EventManager'\nimport { getMainConfig } from './Config'\nimport { fetchJson, pathJoin, getAbsoluteURL } from './Tools'\nimport Article from './Article'\n\n\nclass ArticleCollection extends EventManager {\n  constructor() {\n    super()\n    let that = this\n    this._mainConfig = getMainConfig()\n\n    this._articlesList = []\n    this._articlesIndex = {}\n\n    let pathToArticleList = getAbsoluteURL(pathJoin([this._mainConfig.content.articleDir, 'list.json']))\n\n    fetchJson(pathToArticleList, function(url, articleList){\n      if (!articleList)\n        throw 'The list of articles is not available'\n\n      articleList.map( articleId => that.addArticle(articleId))\n\n      // Load the first page of articles\n      that.loadArticlesConfigFromIndex(0, function(articles){\n        that.emit('ready', [articles])\n      })\n    })\n  }\n\n\n  addArticle (id) {\n    if (!(id in this._articlesIndex)) {\n      let article = new Article(id)\n      this._articlesList.push(article)\n      this._articlesIndex[id] = article\n    }\n  }\n\n\n  loadArticlesConfigFromIndex (from=0, cb) {\n    if (from < 0)\n      throw 'The index of article must be above 0.'\n\n    let to = Math.min(from + this._mainConfig.content.articlesPerPage, this._articlesList.length)\n    let shortIdList = this._articlesList.slice(from, to)\n    this.loadArticlesConfigSubset(shortIdList, cb)\n  }\n\n\n  loadArticlesConfigSubset (articles, cb) {\n    // get the articles with the config not yet loaded\n    let noConfArticles = articles.filter( a => !a.isConfigLoaded())\n\n    // if all articles already have their config loaded,\n    // we directly call the event\n    if (noConfArticles.length === 0 && typeof cb === 'function') {\n      return cb(articles)\n    }\n\n    let articlesUrls = noConfArticles.map(article => getAbsoluteURL(article.getConfigURL()))\n    //console.log(articlesUrls)\n\n    fetchJson(articlesUrls, function(url, configs){\n      if (!configs)\n        throw 'The list of articles is not available'\n\n      for (let i=0; i<noConfArticles.length; i++) {\n        noConfArticles[i].setAuthor(configs[i].author)\n        noConfArticles[i].setDate(configs[i].date)\n        noConfArticles[i].setCover(configs[i].cover)\n        noConfArticles[i].setExcerpt(configs[i].excerpt)\n        noConfArticles[i].setTitle(configs[i].title)\n        noConfArticles[i].setPublished(configs[i].published)\n        noConfArticles[i].setTags(configs[i].tags.split(',').map(t=> t.trim()))\n        noConfArticles[i].confirmConfigLoaded()\n      }\n\n      if (typeof cb === 'function') {\n        cb(articles)\n      }\n    })\n  }\n\n\n\n\n\n}\n\nexport default ArticleCollection\n","import EventManager from './EventManager'\nimport { fetchJson, getURL, getAbsoluteURL } from './Tools'\nimport { setMainConfig } from './Config'\nimport ArticleCollection from './ArticleCollection'\n\n\nclass ThePress extends EventManager{\n\n  constructor () {\n    super()\n\n    console.log(getAbsoluteURL('config.json'))\n    console.log(getURL())\n    console.log(window.location)\n\n    let that = this\n    this._articleCollection = null\n\n\n    fetchJson(getAbsoluteURL('config.json'), function(url, data){\n      if (!data)\n        throw 'The config file is not available'\n\n      setMainConfig(data)\n      that._init()\n    })\n\n  }\n\n\n  _init () {\n    this._articleCollection = new ArticleCollection()\n\n    // the first page of articles should be loaded\n    this._articleCollection.on('ready', function(articles) {\n      console.log(articles)\n\n      articles[0].loadContent()\n\n    })\n  }\n\n}\n\n\nexport default ThePress\n","import ThePress from './ThePress'\n\nexport default ({ThePress})\n"],"names":[],"mappings":"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"}